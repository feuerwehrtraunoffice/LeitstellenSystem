<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>ELIS Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Willkommen im Einsatzleit-System</h1>
  <div id="einsatzListe">
    <p>Einsätze werden hier später angezeigt.</p>
  </div>

  <div id="adminPanel" style="display: none;">
    <h2>Admin-Bereich</h2>
    <p>Nur für Superuser sichtbar.</p>
    <!-- Hier kannst du später Admin-Funktionen einbauen -->
  </div>

  <button onclick="logout()">Logout</button>

  <script type="module">
    import { checkUserRole } from './app.js';
    checkUserRole();

    // Optional: Zeige Admin-Bereich nur für Superuser
    window.checkUserRole = async function () {
      const { auth } = await import('./firebase-config.js');
      const { onAuthStateChanged } = await import('firebase/auth');
      const { getFirestore, doc, getDoc } = await import('firebase/firestore');

      const db = getFirestore();
      onAuthStateChanged(auth, async user => {
        if (!user) {
          window.location.href = "index.html";
        } else {
          const userRef = doc(db, "users", user.uid);
          const userSnap = await getDoc(userRef);
          if (userSnap.exists() && userSnap.data().role === "superuser") {
            document.getElementById("adminPanel").style.display = "block";
          }
        }
      });
    };
  </script>
</body>
</html>
